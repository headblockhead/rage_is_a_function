/*
@title: RAGE is a function of time over results
@author: Edward Hesketh
@tags: []
@addedOn: 2024-00-00
*/

const background_tile = '1'
const background_wall_top = '2'
const background_wall_right = '3'
const background_wall_bottom = '4'
const background_wall_left = '5'
const background_wall_TL = '6'
const background_wall_TR = '7'
const background_wall_BL = '8'
const background_wall_BR = '9'
const trapdoor = 't'

const player = "p"
const annoyer = "a"

setLegend(
  [ player, bitmap`
3333333333333333
333LL333333LL333
33L3333333333L33
3333333333333333
3333233333323333
3332223333222333
3332023333202333
333202333320233C
333222333322233C
333121333312133C
333313333331333C
333333333333333C
33333L3333L3333C
333333LLLL33333C
333333333333333C
333333CCCCCCCCCC` ],
  [ annoyer, bitmap`
..88888HHHHHHH..
.8HHHHHHHHHHHHH.
8HHHHHHHHHHHHHHH
HHHHHHHHHHHHHHHH
HHHH2HHHHHH2HHHH
HHH222HHHH222HHH
HHH2L2HHHH2L2HHH
HHH2L2HHHH2L2HHH
HHH222HHHH222HHH
HHHH2HHHHHH2HHH8
HHHHHHHHHHHHHHH8
HHHHHHHHHHHHHHH8
HHHHHHHHHHHHHHH8
HHHHHHHHHHHHHH88
.HHHHHHHHHHHH88.
..HHHHHHH88888..`],
  [ trapdoor, bitmap`
LLLLLLLLLLLLLLLL
L111166LL601111L
L111106LL661111L
L111100LL061111L
L111160LL001111L
L111166LL601111L
L111106LL661111L
L111100LL061111L
L111160LL001111L
L111166LL601111L
L111106LL661111L
L111100LL061111L
L111160LL001111L
L111166LL601111L
L111106LL661111L
LLLLLLLLLLLLLLLL`],
  [ background_tile, bitmap`
11LLLLLLLLLLLLLL
100000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
LLLLLLLLLLLLLLLL`],
  [ background_wall_top, bitmap`
2222222222222222
1000000000000001
1000000000000001
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
LLLLLLLLLLLLLLLL`],
  [ background_wall_right, bitmap`
11LLLLLLLLLLL112
1000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
LLLLLLLLLLLLL112`],
  [ background_wall_bottom, bitmap`
11LLLLLLLLLLLLLL
100000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
L00000000000000L
1000000000000001
1000000000000001
2222222222222222`],
  [ background_wall_left, bitmap`
211LLLLLLLLLLLLL
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
211LLLLLLLLLLLLL`],
  [ background_wall_TL, bitmap`
2222222222222222
2000000000000001
2000000000000001
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
211LLLLLLLLLLLLL`],
  [ background_wall_TR, bitmap`
2222222222222222
1000000000000002
1000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
LLLLLLLLLLLLL112`],
  [ background_wall_BL, bitmap`
211LLLLLLLLLLLLL
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
200000000000000L
2000000000000001
2000000000000001
2222222222222222`],
  [ background_wall_BR, bitmap`
11LLLLLLLLLLL112
1000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
L000000000000002
1000000000000002
1000000000000002
2222222222222222`],
)

setSolids([player, annoyer])

let level = 0
const levels = [
  map`
6222222227
5111111113
5111111113
5111tt1113
5111tt1113
5111111113
5111111113
8444444449`
]

setMap(levels[level])

addSprite(0,0,player)

addSprite(5,5,annoyer)
addSprite(4,5,annoyer)

setPushables({
  [ player ]: []
})

onInput("w", () => {
  getFirst(player).y -= 1
})
onInput("a", () => {
  getFirst(player).x -= 1
})
onInput("s", () => {
  getFirst(player).y += 1
})
onInput("d", () => {
  getFirst(player).x += 1
})

afterInput(() => {
  
})

let gameIntervals = [];

gameIntervals.push(
  setInterval(() => {
    player_sprite = getFirst(player)
    annoyers = getAll(annoyer)
    annoyers.forEach((annoyer) => {
      if (annoyer.x > player_sprite.x){
        annoyer.x-=1
        return
      }
      if (annoyer.x < player_sprite.x){
        annoyer.x+=1
        return
      }
      if (annoyer.y > player_sprite.y){
        annoyer.y-=1
        return
      }
      if (annoyer.y < player_sprite.y){
        annoyer.y+=1
        return
      }
    });
  }, 350)
);
